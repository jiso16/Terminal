#  코드 설명

 ## 전체적인 동작 설명

```
#include "terminal.h"

void MkDir();
void RmDir();
void LsCheck();

FILE* sfp;
FILE* dfp;
char copy;
char command[10];
char path[100] = " ";
char path2[_MAX_PATH] = "C:\\dev\\Terminal";
char path3[_MAX_PATH] = "";
char file_path[_MAX_PATH] = "C:\\dev\\Terminal";
char upperDir[100] = "";
char pathName[20] = "";
char copyPath[_MAX_PATH] = "";
char mkFolder[_MAX_PATH] = "";
char folderName[20] = "";
char rmFolder[_MAX_PATH] = "";
int check = 0;
int check2 = 0;
int len = 0;
int main()
{
    scanf("%s", &command);

    if (strcmp(command, "ls") == 0) 
    {
        FileSearch(file_path); //file_path는 임의로 초기화 해둠
        strcpy(file_path, path2);
        printf("\n");
    }
    else
    {
        main();
    }

    while (1)
    {

        scanf("%s", &command);

        if (strcmp(command, "cd") == 0)
        {
            CdCheck();
        }
        else if (strcmp(command, "ls") == 0)
        {
            LsCheck();
        }
        else if (strcmp(command, "cp") == 0)
        {
            CpCheck();
        }
        else if (strcmp(command, "mkdir") == 0)
        {
            MkDir();
        }
        else if (strcmp(command, "rmdir") == 0)
        {
            RmDir();
        }
    }
    return 0;
}
```
 1. 사용할 헤더파일 선언
 
 -전역변수 선언 및 전역변수 초기화

 3. 처음 ls명령어
 
 -처음에는 무조건 ls 명령어를 사용하도록 만들었습니다. 다른 명령어를 입력하면 다시 main()을 호출하면서 다시 시작합니다.
 
 -ls를 입력하면 초기화 해둔 디렉토리를 확인해서 파일명과 폴더명을 출력합니다.
 
 -이 과정은 시작할 때 한 번만 동작합니다.
 ![시작할때ls](https://user-images.githubusercontent.com/66424045/90885344-5f5def00-e3ec-11ea-9384-7eadea6edf33.PNG "프로그램 시작할때 명령어")

 5. cd
 
    -cd [이동할 디렉토리명]을 입력하면 그 디렉토리로 이동합니다.
   
    -현재 경로에 없는 디렉토리명을 입력하면 아무 동작도 하지 않습니다.
  
 6. ls 
 
   -현재 디렉토리의 파일명/폴더명을 화면에 나타내줍니다.
 
   -잘못 된 디렉토리라면 화면에 아무것도 띄우지 않습니다.
 
 7. cp 
 
   -cp [복사할 소스파일명] [복사되는 폴더의 경로] 또는 cp [복사할 소스 파일의 경로] [복사되는 폴더의 경로] 를 입력하면 똑같은 파일이 복사됩니다.
 
   -잘못 된 파일 경로일 시 아무 동작도 하지 않습니다.
 
 8. mkdir
 
  -mkdir [생성할 디렉토리명 ]을 입력하면 현재경로에서 빈 디렉토리가 생성됩니다.
  
  -이미 있는 디렉토리명과 겹치면 아무것도 생성하지 않습니다.
 
 9. rmdir
  
  -rmdir [제거할 디렉토리명 ]을 입력하면 현재경로에서 디렉토리명을 확인하고 제거합니다.
  
  -현재경로에 없는 디렉토리명을 입력하면 아무동작도 하지 않습니다.
 
 

 ## CdCheck함수 설명

  ```
  #include "terminal.h"

extern char path[100] ;
extern char file_path[_MAX_PATH];
extern char upperDir[100];
extern int check;
extern int len;

void CdCheck()
{
    scanf("%s", &path);

    if (strcmp(path, "..") == 0)
    {
        char upperDir[100] = "";
        char* ptr = strrchr(file_path, '\\');
        len = strlen(file_path) - strlen(ptr);
        for (int i = 0; i < len; i++)
        {
            upperDir[i] = file_path[i];
        }
        strcpy(file_path, upperDir);
        printf("\n");
    }
    else
    {
        strcat(file_path, "\\");
        strcat(file_path, path);

        check = FileCheck(file_path);
        if (check == 3)
        {
            char originDir[100] = "";
            char* ptr = strrchr(file_path, '\\');
            len = strlen(file_path) - strlen(ptr);
            for (int i = 0; i < len; i++)
            {
                originDir[i] = file_path[i];
            }
            strcpy(file_path, originDir);
        }
        else
        {
            printf("\n");
        }
    }
}
  ```
  1. 함수를 포함한 terminal.h 헤더 파일을 include 해주었습니다.
  
1. 사용하려는 전역변수가 main.c파일에서 선언 됐기 때문에 extern을 이용하여 선언해주었고, main.c 파일에서 초기화를 해주었기 때문에 따로 초기화를 해주지는 않았습니다.

2.  일단 main.c 파일의 main함수에서 command를 이용하여 사용할 명령어를 입력 받습니다. 이때 command가 cd라면 CdCheck함수를 호출해 path를 입력받고 두가지의 경우로 나눕니다.
  - path가 "이동하려는 폴더명" 일 때
   -path가 현재 디렉토리에 있는 폴더명이 맞는지 확인 후 맞으면 그 경로로 이동합니다.
   -path가 현재 디렉토리에 있는 폴더명이 아니라면 경로를 이동하지 않습니다.
   
![디렉토리 이동](https://user-images.githubusercontent.com/66424045/90889506-473d9e00-e3f3-11ea-86b1-5ec4e29ded84.PNG "디렉토리 이동")




  - path가 ".."일때
   -현재 경로에서 한 단계 위의 상위 디렉토리로 경로를 이동합니다.
 
![상위디렉으로이동](https://user-images.githubusercontent.com/66424045/90889671-89ff7600-e3f3-11ea-95b8-ad1398d8276b.PNG "")


    


<!--stackedit_data:
eyJoaXN0b3J5IjpbLTQyNjI3OTk5NSwtMzY3NzYzODExLDIwOD
g4NTEyMjUsMTc0NzYyMjU3LC0xMDM3MjQ4NTkyLC0xMzgzNDMx
MDUsMTc4Mjc2NjAyLDM4NTAyMDY0NV19
-->